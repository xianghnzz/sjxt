import{r as t,t as e,aa as r,o as s,c as l,w as o,u as a,e as i,a as d,b as c,d as u,l as n,m as p,F as _,v as f,p as h,s as y,h as g,i as x,g as m,$ as w,I as v,j as b,_ as j,q as I}from"./index-855f89f9.js";import{_ as k}from"./no-data.bcb4c8a9.js";import{a as P,o as q,r as C}from"./uni-app.es.8f4863ce.js";import{_ as S}from"./back_bai.3f7a0c49.js";import{_ as A}from"./ss.f111cf75.js";import{_ as F}from"./zs.1adaedfe.js";import{_ as L}from"./_plugin-vue_export-helper.1b428a4d.js";const E=L({__name:"template-selection",setup(L){const E=t({showbutton:0,triggered:!1,stylesAllList:[],activeStyle:{},queryInfo:{ids:[],product_styles_id:"",product_type:1,product_name:""},list:[],activeProduct:{}}),{showbutton:B,triggered:O,stylesAllList:R,activeStyle:T,queryInfo:U,list:V,activeProduct:z}=e(E);r((()=>y.state.userInfo));const D=r((()=>y.state.orderFrom)),H=()=>{u.goToPage("compile")},J=()=>{E.list=[],$()},M=()=>{E.triggered=!0,E.list=[],$()},N=()=>{},$=()=>{console.log("data.queryInfo: ",E.queryInfo),i.getProductByIds(E.queryInfo).then((t=>{E.list=t.data,E.triggered=!1}),(()=>{E.triggered=!1}))};return P((()=>{})),q((()=>{var t,e,r,s;(null==(e=null==(t=D.value)?void 0:t.order_spec_info_obj)?void 0:e.spec_template_ids)?E.queryInfo.ids=null==(s=null==(r=D.value)?void 0:r.order_spec_info_obj)?void 0:s.spec_template_ids.split(",").filter((t=>t)):E.queryInfo.ids=[],i.getStylesAllList().then((t=>{E.stylesAllList=t.data,E.stylesAllList.length>0?(E.activeStyle=E.stylesAllList[0],E.queryInfo.product_styles_id=E.activeStyle.value,$()):$()}),(()=>{E.triggered=!1}))})),(t,e)=>{const r=g,i=x,P=m,q=w,L=v,B=C(b("no-data"),k),D=C(b("page"),j);return s(),l(D,{bgColor:"#fff",topColor:"#00AEEF",topHeight:88,refresherEnabled:!0,triggered:a(O),refresherrefresh:M,scrolltolower:N},{navBar:o((()=>[d(P,{class:"text-center flex align-center justify-center",style:{height:"88rpx"}},{default:o((()=>[d(r,{class:"font-36 text-white"},{default:o((()=>[c("模版选择")])),_:1}),d(P,{onClick:e[0]||(e[0]=t=>a(u).goBack()),class:"position-absolute rounded-circle flex align-center justify-center",style:{width:"40rpx",height:"32rpx",left:"32rpx"}},{default:o((()=>[d(i,{style:{width:"40rpx",height:"32rpx"},src:S,mode:""})])),_:1})])),_:1})])),content:o((()=>[d(P,null,{default:o((()=>[d(P,{class:"bg-primary p-2",style:{height:"200rpx"}},{default:o((()=>[d(q,{class:"bg-white rounded-20 px-2","scroll-x":"true",style:{width:"100%",height:"100%"}},{default:o((()=>[d(P,{class:"flex align-center p-2"},{default:o((()=>[(s(!0),n(_,null,p(a(R),((t,e)=>(s(),l(P,{onClick:e=>(t=>{E.activeStyle=t,E.queryInfo.product_styles_id=t.value,J()})(t),key:e,class:"mr-2",style:{width:"90rpx"}},{default:o((()=>[d(P,{class:"rounded-10",style:{width:"90rpx",height:"90rpx"}},{default:o((()=>[d(i,{style:{width:"90rpx"},src:a(u).showImageUrl(t.styles_cover),mode:"widthFix"},null,8,["src"])])),_:2},1024),d(P,{class:"text-ellipsis text-center",style:{width:"90rpx"}},{default:o((()=>[d(r,{class:I(["font-24",a(U).product_styles_id==t.value?"text-primary":"text-color-999 "])},{default:o((()=>[c(f(t.text),1)])),_:2},1032,["class"])])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})])),_:1}),d(P,{class:"bg-primary",style:{position:"relative"}},{default:o((()=>[d(P,{class:"p-2 rounded-top-20 bg-white"},{default:o((()=>[d(P,{class:"rounded-circle flex align-center px-2",style:{"background-color":"#f5f5f5",height:"64rpx"}},{default:o((()=>[d(L,{modelValue:a(U).product_name,"onUpdate:modelValue":e[1]||(e[1]=t=>a(U).product_name=t),class:"font-26 flex-1",type:"text",placeholder:"输入模版名称搜索","placeholder-style":"color: #ccc"},null,8,["modelValue"]),d(i,{onClick:J,style:{width:"40rpx",height:"40rpx"},src:A,mode:""})])),_:1}),d(P,{class:"py-2 flex align-center"},{default:o((()=>[d(i,{style:{width:"26rpx",height:"16rpx"},src:F,mode:""}),d(r,{class:"ml-2 font-32"},{default:o((()=>[c(f(a(T).text),1)])),_:1})])),_:1})])),_:1}),d(P,{class:"p-2 flex flex-wrap bg-white"},{default:o((()=>[(s(!0),n(_,null,p(a(V),((t,e)=>(s(),l(P,{onClick:e=>(t=>{E.showbutton=0,E.activeProduct=t;const e={product_id:E.activeProduct.product_id,product_name:E.activeProduct.product_name,product_print:E.activeProduct.product_print,product_type:E.activeProduct.product_type,product_width:E.activeProduct.product_width,product_height:E.activeProduct.product_height},r={order_product_id:e.product_id,order_product_name:e.product_name,order_product_info:JSON.stringify(e),order_product_info_obj:e};y.commit("SET_ORDER_FORM",r),setTimeout((()=>{E.showbutton=1}),100)})(t),key:e,class:"m-2"},{default:o((()=>[d(P,{class:I(["rounded-20 overflow-hidden flex align-center justify-center border",a(z).product_id==t.product_id?"border-primary":""]),style:{width:"310rpx",height:"310rpx"}},{default:o((()=>[d(i,{style:{width:"310rpx"},src:a(u).showImageUrl(t.product_cover),mode:"widthFix"},null,8,["src"])])),_:2},1032,["class"]),d(P,{class:"text-ellipsis text-center mt-1",style:{width:"310rpx"}},{default:o((()=>[d(r,{class:I([a(z).product_id==t.product_id?"text-primary":"","font-32"])},{default:o((()=>[c(f(t.product_name),1)])),_:2},1032,["class"])])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1}),d(P,{class:"bg-white py-2"},{default:o((()=>[0==a(V).length?(s(),l(B,{key:0})):h("",!0)])),_:1})])),_:1}),1==E.showbutton?(s(),l(P,{key:0,class:"bg-white flex align-center justify-center px-4 fade-in-animation",style:{position:"absolute",bottom:"20px",left:"0",right:"0"}},{default:o((()=>[d(P,{onClick:H,class:"flex-1 flex align-center justify-center linear-gradient rounded-circle",style:{height:"90rpx"}},{default:o((()=>[d(r,{class:"text-white"},{default:o((()=>[c("上传图片")])),_:1})])),_:1})])),_:1})):h("",!0)])),_:1})])),_:1},8,["triggered"])}}},[["__scopeId","data-v-fa44dce6"]]);export{E as default};
