import{r as e,t,aa as l,o as r,c as o,w as a,u as s,e as i,a as d,b as n,d as c,p as u,l as _,m as f,F as p,s as g,h,i as y,g as x,j as m,_ as v,v as w}from"./index-855f89f9.js";import{_ as b}from"./no-data.bcb4c8a9.js";import{a as j,o as k,r as I}from"./uni-app.es.8f4863ce.js";import{_ as P}from"./tui-modal.dd985726.js";import{_ as F}from"./back_bai.3f7a0c49.js";import{_ as C}from"./_plugin-vue_export-helper.1b428a4d.js";const U=""+new URL("prompt-e32a1d6a.png",import.meta.url).href,B=C({__name:"product-preview",setup(C){const B=e({triggered:!1,queryInfo:{product_id:""},info:{product_print_list:[]},coverPage:{pages_id:"",pages_cover:""},endPage:{pages_id:"",pages_cover:""},showModal:0}),{triggered:q,queryInfo:T,info:E,coverPage:M,endPage:H,showModal:A}=t(B);l((()=>g.state.userInfo));const J=l((()=>g.state.orderFrom)),L=l((()=>{var e,t;return 1==(null==(t=null==(e=J.value)?void 0:e.order_commodity_info_obj)?void 0:t.commodity_book)?1:0})),N=l((()=>{var e,t;return 1==(null==(t=null==(e=J.value)?void 0:e.order_commodity_info_obj)?void 0:t.commodity_print)?1:0})),O=()=>{var e,t,l,r;B.showModal=0,1==L.value?1==(null==(t=null==(e=J.value)?void 0:e.order_commodity_info_obj)?void 0:t.commodity_mode)?c.goToPage("product-book-free-edit"):c.goToPage("product-book-edit"):1==(null==(r=null==(l=J.value)?void 0:l.order_commodity_info_obj)?void 0:r.commodity_mode)?c.goToPage("product-free-edit"):c.goToPage("product-edit")},R=()=>{B.triggered=!0,z()},S=()=>{},z=()=>{i.getProductById(B.queryInfo).then((e=>{e.data&&(e.data.product_print?(e.data.product_print_list=JSON.parse(e.data.product_print),L.value&&(B.coverPage=e.data.product_print_list[0],B.endPage=e.data.product_print_list[e.data.product_print_list.length-1],e.data.product_print_list.shift(),e.data.product_print_list.pop())):e.data.product_print_list=[],B.info=e.data),B.triggered=!1}),(()=>{B.triggered=!1}))};return j((()=>{})),k((e=>{B.queryInfo.product_id=e.product_id,z(),console.log("orderForm",J.value)})),(e,t)=>{const l=h,i=y,g=x,j=I(m("no-data"),b),k=I(m("tui-modal"),P),C=I(m("page"),v);return r(),o(C,{bgColor:"#fff",topColor:"#00AEEF",topHeight:88,bottomHeight:120,refresherEnabled:!0,triggered:s(q),refresherrefresh:R,scrolltolower:S},{navBar:a((()=>[d(g,{class:"text-center flex align-center justify-center",style:{height:"88rpx"}},{default:a((()=>[d(l,{class:"font-36 text-white"},{default:a((()=>[n("模版预览")])),_:1}),d(g,{onClick:t[0]||(t[0]=e=>s(c).goBack()),class:"position-absolute rounded-circle flex align-center justify-center",style:{width:"40rpx",height:"32rpx",left:"32rpx"}},{default:a((()=>[d(i,{style:{width:"40rpx",height:"32rpx"},src:F,mode:""})])),_:1})])),_:1})])),content:a((()=>{var e,t;return[1==s(L)?(r(),o(g,{key:0,class:"px-1 py-2"},{default:a((()=>[s(M).pages_id?(r(),o(g,{key:0,class:""},{default:a((()=>[d(g,{class:"flex flex-column align-center justify-center"},{default:a((()=>[d(g,{class:"border overflow-hidden",style:{width:"344rpx"}},{default:a((()=>[d(i,{style:{width:"344rpx"},src:s(c).showImageUrl(s(M).pages_cover),mode:"widthFix"},null,8,["src"])])),_:1}),d(g,{class:"flex align-center justify-center py-2 font-30 font-weight-bold"},{default:a((()=>[d(l,{class:"mx-1"},{default:a((()=>[n("封面")])),_:1})])),_:1})])),_:1})])),_:1})):u("",!0),d(g,{class:"flex flex-wrap"},{default:a((()=>[(r(!0),_(p,null,f(s(E).product_print_list,((e,t)=>(r(),o(g,{key:t,class:"m-1",style:{width:"344rpx"}},{default:a((()=>[d(g,{class:"border position-relative",style:{width:"100%"}},{default:a((()=>[d(i,{style:{width:"100%"},src:s(c).showImageUrl(e.pages_cover),mode:"widthFix"},null,8,["src"]),1==s(N)&&(t+1)%2==0?(r(),o(g,{key:0,class:"bg-opacity p-1 position-absolute right-0 top-0 flex align-center justify-center rounded-circle",style:{width:"60rpx",height:"30rpx"}},{default:a((()=>[d(l,{class:"font-20 text-white"},{default:a((()=>[n("反面")])),_:1})])),_:1})):u("",!0)])),_:2},1024),d(g,{class:"flex align-center justify-center py-2 font-30 font-weight-bold"},{default:a((()=>[d(l,null,{default:a((()=>{var e,t;return[n(w(null==(t=null==(e=s(J))?void 0:e.order_spec_info_obj)?void 0:t.spec_page_prefix),1)]})),_:1}),d(l,{class:"mx-1"},{default:a((()=>[n(w(t+1),1)])),_:2},1024),d(l,null,{default:a((()=>{var e,t;return[n(w(null==(t=null==(e=s(J))?void 0:e.order_spec_info_obj)?void 0:t.spec_page_suffix),1)]})),_:1})])),_:2},1024)])),_:2},1024)))),128))])),_:1}),s(H).pages_id?(r(),o(g,{key:1,class:""},{default:a((()=>[d(g,{class:"flex flex-column align-center justify-center"},{default:a((()=>[d(g,{class:"border overflow-hidden",style:{width:"344rpx"}},{default:a((()=>[d(i,{style:{width:"344rpx"},src:s(c).showImageUrl(s(H).pages_cover),mode:"widthFix"},null,8,["src"])])),_:1}),d(g,{class:"flex align-center justify-center py-2 font-30 font-weight-bold"},{default:a((()=>[d(l,{class:"mx-1"},{default:a((()=>[n("尾页")])),_:1})])),_:1})])),_:1})])),_:1})):u("",!0),0==s(E).product_print_list.length?(r(),o(j,{key:2})):u("",!0)])),_:1})):1==(null==(t=null==(e=s(J))?void 0:e.order_commodity_info_obj)?void 0:t.commodity_mode)?(r(),o(g,{key:1,class:"px-1 py-2 flex flex-wrap"},{default:a((()=>[(r(!0),_(p,null,f(s(E).product_print_list,((e,t)=>(r(),o(g,{key:t,class:"m-1",style:{width:"344rpx"}},{default:a((()=>[d(g,{class:"border position-relative",style:{width:"100%"}},{default:a((()=>[d(i,{style:{width:"100%"},src:s(c).showImageUrl(e.pages_cover),mode:"widthFix"},null,8,["src"]),1==s(N)&&(t+1)%2==0?(r(),o(g,{key:0,class:"bg-opacity p-1 position-absolute right-0 top-0 flex align-center justify-center rounded-circle",style:{width:"60rpx",height:"30rpx"}},{default:a((()=>[d(l,{class:"font-20 text-white"},{default:a((()=>[n("反面")])),_:1})])),_:1})):u("",!0)])),_:2},1024),d(g,{class:"flex align-center justify-center py-2 font-30 font-weight-bold"},{default:a((()=>[d(l,null,{default:a((()=>{var e,t;return[n(w(null==(t=null==(e=s(J))?void 0:e.order_spec_info_obj)?void 0:t.spec_page_prefix),1)]})),_:1}),d(l,{class:"mx-1"},{default:a((()=>[n(w(t+1),1)])),_:2},1024),d(l,null,{default:a((()=>{var e,t;return[n(w(null==(t=null==(e=s(J))?void 0:e.order_spec_info_obj)?void 0:t.spec_page_suffix),1)]})),_:1})])),_:2},1024)])),_:2},1024)))),128)),0==s(E).product_print_list.length?(r(),o(j,{key:0})):u("",!0)])),_:1})):(r(),o(g,{key:2,class:"p-2"},{default:a((()=>[(r(!0),_(p,null,f(s(E).product_print_list,((e,t)=>(r(),o(g,{key:t,class:"",style:{width:"100%"}},{default:a((()=>[d(g,{class:"border position-relative",style:{width:"100%"}},{default:a((()=>[d(i,{style:{width:"100%"},src:s(c).showImageUrl(e.pages_cover),mode:"widthFix"},null,8,["src"]),1==s(N)&&(t+1)%2==0?(r(),o(g,{key:0,class:"bg-opacity p-1 position-absolute right-0 top-0 flex align-center justify-center rounded-circle",style:{width:"60rpx",height:"30rpx"}},{default:a((()=>[d(l,{class:"font-20 text-white"},{default:a((()=>[n("反面")])),_:1})])),_:1})):u("",!0)])),_:2},1024),d(g,{class:"flex align-center justify-center py-2 font-30 font-weight-bold"},{default:a((()=>[d(l,null,{default:a((()=>{var e,t;return[n(w(null==(t=null==(e=s(J))?void 0:e.order_spec_info_obj)?void 0:t.spec_page_prefix),1)]})),_:1}),d(l,{class:"mx-1"},{default:a((()=>[n(w(t+1),1)])),_:2},1024),d(l,null,{default:a((()=>{var e,t;return[n(w(null==(t=null==(e=s(J))?void 0:e.order_spec_info_obj)?void 0:t.spec_page_suffix),1)]})),_:1})])),_:2},1024)])),_:2},1024)))),128)),0==s(E).product_print_list.length?(r(),o(j,{key:0})):u("",!0)])),_:1})),d(k,{show:1==s(A),custom:""},{default:a((()=>[d(g,{class:"rounded-20 bg-white border-box font pb-3",style:{width:"600rpx"}},{default:a((()=>[d(g,{class:"py-2 text-center"},{default:a((()=>[d(l,{class:"font-40 font-weight-bold"},{default:a((()=>[n("定制须知")])),_:1})])),_:1}),d(g,{class:"p-2"},{default:a((()=>[d(i,{style:{width:"100%"},src:U,mode:"widthFix"})])),_:1}),d(g,{class:"px-5 flex align-center justify-center px-2"},{default:a((()=>[d(g,{onClick:O,class:"flex-1 flex align-center justify-center linear-gradient rounded-circle",style:{height:"80rpx"}},{default:a((()=>[d(l,{class:"text-white"},{default:a((()=>[n("知道了")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["show"])]})),bottomBar:a((()=>[d(g,{class:"bg-white flex align-center justify-center px-4",style:{height:"120rpx"}},{default:a((()=>[d(g,{onClick:t[1]||(t[1]=e=>A.value=1),class:"flex-1 flex align-center justify-center linear-gradient rounded-circle",style:{height:"90rpx"}},{default:a((()=>[d(l,{class:"text-white"},{default:a((()=>[n("上传照片")])),_:1})])),_:1})])),_:1})])),_:1},8,["triggered"])}}},[["__scopeId","data-v-443b0929"]]);export{B as default};
